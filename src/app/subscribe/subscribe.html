<div class="container">
  <div class="header-icon">
    <!-- Ikona dla Trail Achi (wspinaczka/góry) -->
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mountain-icon"><path d="m8 3 4 8 5-5 5 15H2L8 3z"/></svg>
  </div>
  <h1>Dołącz do Trail Achi!</h1>
  <p class="subtitle">Otrzymaj ekskluzywny link aktywacyjny, aby połączyć swoje konto Strava i analizować osiągnięcia.</p>

  <!-- Połączenie z registrationForm i wywołanie onSubmit -->
  <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="form-container">

    <input
      type="email"
      formControlName="email"
      class="email-input"
      placeholder="Wpisz swój adres e-mail"
      required
      [disabled]="loading || registrationForm.disabled"
    >

    <!-- Wyświetlanie błędu walidacji Angulara -->
    <div
      *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched"
      class="validation-error"
    >
            <span *ngIf="registrationForm.get('email')?.errors?.['required']">
                Adres e-mail jest wymagany.
            </span>
      <span *ngIf="registrationForm.get('email')?.errors?.['email']">
                Wprowadź poprawny format e-mail.
            </span>
    </div>

    <button
      type="submit"
      class="btn cta-button"
      [disabled]="registrationForm.invalid || loading"
    >
      <span *ngIf="!loading">Aktywuj darmowy dostęp</span>
      <span *ngIf="loading">Wysyłanie...</span>
    </button>
  </form>

  <!-- Komunikaty statusu (sukces/błąd z backendu) -->
  <div *ngIf="successMessage" class="status-message success">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="status-message error">{{ errorMessage }}</div>
</div>
